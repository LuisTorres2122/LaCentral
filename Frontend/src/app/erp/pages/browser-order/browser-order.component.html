<main>
  <section class="my-5 w-5/6 mx-auto">
    <h1 class="text-5xl flex justify-center font-playfair">
      Busqueda por Cliente
    </h1>
  </section>
  <section class="flex gap-3 justify-center my-5">
    <label for="simple-search" class="sr-only">Buscar</label>
    <div class="relative w-4/6">
      <div
        class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
      >
        <svg
          aria-hidden="true"
          class="w-5 h-5 text-black"
          fill="currentColor"
          viewbox="0 0 20 20"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
            clip-rule="evenodd"
          />
        </svg>
      </div>
      <input
        type="text"
        class="border-2 border-enmarcadora-principal text-sm rounded-lg text-black block w-full pl-10 p-2"
        placeholder="Nombre cliente"
        name="search"
        [(ngModel)]="search"
      />
    </div>
    <button
      (click)="buscarElements()"
      class="border-2 border-enmarcadora-principal rounded-full w-16 bg-enmarcadora-principal text-white font-semibold hover:text-enmarcadora-principal hover:bg-white"
    >
      Buscar
    </button>
  </section>

  <section>
    <table class="w-5/6 text-sm text-left mx-auto">
      <thead class="text-sm bold text-white uppercase bg-enmarcadora-principal">
        <tr>
          <th scope="col" class="px-4 py-3" *ngFor="let header of headers">
            {{ header }}
          </th>
          <th scope="col" class="px-4 py-3">
            <span class="sr-only">Actions</span>
          </th>
        </tr>
      </thead>

      <tbody *ngFor="let element of elements">
        <tr class="border-b">
          <td class="px-4 py-3">
            {{ element.idPedido }}
          </td>
          <td class="px-4 py-3">
            {{ element.idCliente }}
          </td>
          <td class="px-4 py-3">
            {{ element.nombre }}
          </td>
          <td class="px-4 py-3">
            {{ element.fecha }}
          </td>
          <td class="px-4 py-3">
            {{ element.descuento }}
          </td>
          <td class="px-4 py-3">
            {{ element.total | currency:'Q' }}
          </td>
          <td class="px-4 py-3">
            {{ element.abono | currency:'Q' }}
          </td>
          <td class="px-4 py-3">
            {{ element.estatus }}
          </td>

          <td class="px-4 py-3 flex items-center justify-end">
            <button
              (click)="
                switchToggleOptions(elements.indexOf(element), element.idPedido)
              "
              class="inline-flex items-center text-sm font-medium p-1.5 text-center hover:text-gray-400 rounded-lg focus:outline-none"
              type="button"
            >
              <svg
                class="w-6"
                version="1.1"
                id="Capa_1"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                x="0px"
                y="0px"
                viewBox="0 0 512 512"
                style="enable-background: new 0 0 512 512"
                xml:space="preserve"
                [ngClass]="{
                  'rotate-180 transition-transform duration-700 ': toggledata
                }"
              >
                <g>
                  <g>
                    <path
                      d="M506.157,132.386c-7.803-7.819-20.465-7.831-28.285-0.029l-207.73,207.299c-7.799,7.798-20.486,7.797-28.299-0.015 L34.128,132.357c-7.819-7.803-20.481-7.79-28.285,0.029c-7.802,7.819-7.789,20.482,0.029,28.284l207.701,207.27 c11.701,11.699,27.066,17.547,42.433,17.547c15.358,0,30.719-5.846,42.405-17.533L506.128,160.67 C513.946,152.868,513.959,140.205,506.157,132.386z"
                    ></path>
                  </g>
                </g>
              </svg>
            </button>
          </td>
        </tr>
        <tr *ngIf="toggleOpts[elements.indexOf(element)]">
          <td [attr.colspan]="9">
            <table class="w-full">
              <tr>
                <th
                
                  scope="col"
                  class="px-4 py-3 bg-enmarcadora-second uppercase"
                  *ngFor="let header of headersDetails"
                >
                  {{ header }}
                </th>
              </tr>
              <tbody *ngFor="let details of detailsOrder">
                <tr class="border-b">
                  <td class="px-4 py-3">
                    {{ details.idDetallePedido }}
                  </td>
                  <td class="px-4 py-3">
                    {{ details.idPedido }}
                  </td>
                  <td class="px-4 py-3 w-full">
                    {{ details.descripcion }}
                  </td>
                  <td class="px-4 py-3">
                    {{ details.precio | currency:'Q' }}
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </section>
  <section>
    <form action=""></form>
  </section>
</main>
